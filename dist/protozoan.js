!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){var i=t("./DomPart"),r=function(){function t(t,e){this.template={},this.vars={},this.domPart=null,this.listeners={},this.container=e,this.template=t,this.compile()}return t.prototype.defineVars=function(t){if(t)for(var e in t)t.hasOwnProperty(e)&&this.defineVar(e,t[e])},t.prototype.defineVar=function(t,e){var n=this;Object.defineProperty(this.vars,t,{set:function(e){this["_"+t]=e,n.varChanged(t,e)},get:function(){return this["_"+t]},enumerable:!0,configurable:!0}),this.vars[t]=e},t.prototype.varChanged=function(t,e){var n=this;this.listeners[t]&&this.listeners[t].forEach(function(t){return t.callback(t.parametersNames.map(function(t){return n.vars[t]}))})},t.prototype.listenToVarsChanges=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push({callback:e,parametersNames:t})}},t.prototype.compile=function(){this.domPart=new i.DomPart(this,this.vars,this.container,this.template.body),this.defineVars(this.template.vars)},t}();n.Component=r},{"./DomPart":2}],2:[function(t,e,n){var i=t("./Component"),r=t("./utils/FunctionUtils"),o=function(){function t(t,e,n,i,r){this.content=null,this.html="",this.root=t,this.varsScope=e,this.$parent=n;var r=r||{},o=r.tag||"div";this.attributes=r.attributes||{},this.createDomElement(i,o)}return t.prototype.createDomElement=function(e,n){if(this.$element=document.createElement(n),this.attributes instanceof Function?this.root.listenToVarsChanges(r.FunctionUtils.getParametersNames(this.attributes),this.renderAttributes.bind(this)):this.renderAttributes([]),this.$parent&&this.$parent.appendChild(this.$element),e instanceof i.Component)this.content=e.domPart,this.$parent.appendChild(e.domPart.$element);else if(e instanceof Array){this.content=[];for(var o=0;o<e.length;o++){var s=e[o],a=void 0;a="object"!=typeof s||s instanceof Array||s instanceof i.Component?new t(this.root,this.varsScope,this.$element,s):new t(this.root,this.varsScope,this.$element,s.content,{tag:s.tag,attributes:s.attributes}),this.content.push(a),this.$element.appendChild(a.$element)}}else"string"==typeof e?(this.content=e,this.$element.innerHTML=e):"number"==typeof e?(this.content=e,this.$element.innerHTML=e):"function"==typeof e&&(this.content=e,this.root.listenToVarsChanges(r.FunctionUtils.getParametersNames(e),this.render.bind(this)),this.render([]));return null},t.prototype.render=function(t){console.log("render",t),"function"==typeof this.content&&(console.log(1,this.varsScope),this.$element.innerHTML=this.content.apply(this.varsScope,t))},t.prototype.renderAttributes=function(t){var e=this.attributes;this.attributes instanceof Function&&(e=e.apply(this.varsScope,t));for(var n in e)e.hasOwnProperty(n)&&this.$element.setAttribute(n,e[n])},t}();n.DomPart=o},{"./Component":1,"./utils/FunctionUtils":4}],3:[function(t,e,n){var i=t("./Component"),r={Component:i.Component};window&&(window.Protozoan=r),e.exports=r},{"./Component":1}],4:[function(t,e,n){var i=function(){function t(){}return t.getParametersNames=function(e){var n=e.toString().replace(t.STRIP_COMMENTS,""),i=n.slice(n.indexOf("(")+1,n.indexOf(")")).match(t.ARGUMENT_NAMES);return null===i&&(i=[]),i},t.STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,t.ARGUMENT_NAMES=/([^\s,]+)/g,t}();n.FunctionUtils=i},{}]},{},[3]);